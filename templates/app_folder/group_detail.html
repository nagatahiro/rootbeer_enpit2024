{% extends "base.html" %}
{% block title %}{{ group.name }}{% endblock %}
{% block contents %}
<div class="container mt-5">
  <nav class="navbar navbar-expand-lg navbar-dark fixed-top" style="background-color: cadetblue;">
    <div class="container-fluid">
      <button id="back-button" class="btn btn-link" style="font-size: 1.5rem; color: white;">
        <i class="fas fa-arrow-left"></i> 
      </button>
      <span class="navbar-brand" style="color: white;">{{ group.name }} ({{ members.count }})</span>
      <ul class="navbar-nav ms-auto d-flex flex-row">
        <li class="nav-item">
          <a href="{% url 'app_folder:edit_group' group.id %}" id="edit-icon" class="btn btn-link" style="font-size: 1.5rem; color: white;">
            <i class="fas fa-cog"></i> 
          </a>
        </li>
        <li class="nav-item">
          <button id="toggle-button" class="btn btn-link" style="font-size: 1.5rem; color: white;">
            <i class="fas fa-info-circle"></i>
          </button>
        </li>
      </ul>
    </div>
  </nav>
  <section id="toggle-section" class="menu-section mb-4 card shadow-sm" style="display: none; margin-top: 60px; border-radius: 10px; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1050; background-color: rgba(0, 0, 0, 0.5);">
    <div class="card-header d-flex justify-content-between" style="background-color: cadetblue; color: white; border-radius: 10px 10px 0 0;">
        <h4 class="mb-0">グループ詳細</h4>
        <!-- 閉じるボタン（右上） -->
        <button id="close-button" class="btn btn-link" style="font-size: 1.5rem; color: white;">
            <i class="fas fa-times"></i> 
        </button>
    </div>
    <div class="card-body" style="background-color: white; padding: 20px; height: calc(100% - 60px); overflow-y: auto;">
        <div class="mb-4">
          <h5 class="text-muted">グループ名</h5>
          <p class="text-dark" style="font-size: 1.1rem; font-weight: bold;">{{ group.name }}</p>
        </div>
        <!-- グループの所有者 -->
        <div class="mb-4">
            <h5 class="text-muted">グループの所有者</h5>
            <p class="text-dark" style="font-size: 1.1rem; font-weight: bold;">{{ group.owner.username }}</p>
        </div>
        
        <!-- メンバーリスト -->
        <div>
          <h5 class="text-muted">メンバー({{ members.count }}人)</h5>
          <ul class="list-group" style="border-radius: 10px;">
              {% for member in members %}
                  <li class="list-group-item" style="border: none; padding: 10px 15px;">
                      <span class="text-dark" style="font-size: 1.1rem;">{{ member.username }}</span>
                  </li>
              {% endfor %}
          </ul>
      </div>
    </div>
</section>
<!-- 完成イメージ -->
<div class="text-center" style="margin-top: 20px;">
  <h5 class="text-muted">あなたの支払額は</h5>
  <h2 id="payment-amount" class="text-success" style="font-size: 2.5rem; font-weight: bold;">-100円</h2> <!-- 支払額の表示部分 -->
  <ul>
    <li>花子さんに100円払う</li>
    <li>花さんから100円もらう</li>
    <li>太郎さんに100円払う</li>
  </ul>
  <p>※上記に表示されいる値はデモです。</p>
</div>

<form action="{% url 'app_folder:shooting_registration' group.id %}" method="POST" id="shooting-form">
  {% csrf_token %}
  <button type="submit" class="btn btn-primary" style="position: fixed; bottom: 20px; right: 20px; font-size: 2rem; border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; background-color: cadetblue; border: none;">
    <i class="fas fa-pen" style="color: white;"></i>
  </button>
</form>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    const toggleButton = document.getElementById('toggle-button');
    const toggleSection = document.getElementById('toggle-section');
    const closeButton = document.getElementById('close-button');
    const backButton = document.getElementById('back-button');

    // 詳細セクションの表示/非表示を切り替え
    toggleButton.addEventListener('click', function () {
        toggleSection.style.display = 'block';
    });

    // 閉じるボタンをクリックしたときに詳細セクションを非表示
    closeButton.addEventListener('click', function () {
        toggleSection.style.display = 'none';
    });

    // バックボタンをクリックしてホームページに戻る
    backButton.addEventListener('click', function() {
        window.location.href = "{% url 'app_folder:home' %}";
    });
  });
</script>

{% endblock %}
